{% extends 'elections/base.html' %}

{% block content %}
  <div class="header">
    <h1>Welcome to the 2022 Mock Election</h1>
  </div>
  {% if election.is_active %}
  <div class="alert alert-warning d-flex align-items-center" role="alert">
    <div>
      Results are <strong>not final</strong> until election is over
    </div>
  </div>
  {% endif %}
  <div class="container mt-5">
    {% for race in election.race_set.all %}
    <div class="mb-5">
    <p class="lead m-0">{{ race.name }}</p>
      <div class="d-flex justify-content-between election-bar">
        <h1>{{ race.candidate_set.first.name }}</h1>
        <h1>vs</h1>
        <h1>{{ race.candidate_set.last.name }}</h1>
      </div>
      <div class="progress justify-content-between position-relative">
        <div
            class="progress-bar"
            role="progressbar"
            style="width: {{ race.candidate_set.first.vote_percentage }}%"
        ></div>
        <div
            class="progress-bar bg-dark position-absolute"
            style="left: 50%; top: 0; z-index: 100; height: 100%; width: 5px"
            role="progressbar"
        ></div>
        <div
            class="progress-bar bg-danger"
            role="progressbar"
            style="width: {{ race.candidate_set.last.vote_percentage }}%"
        ></div>
      </div>
    </div>
    {% endfor %}
    <div class="text-center" style="cursor: {{ election.is_active|yesno:"pointer,not-allowed" }};">
      {% if election.is_active %}
        <a href="{% url 'vote' %}" class="btn btn-primary btn-lg">VOTE NOW</a>
      {% else %}
        <button disabled class="btn btn-primary btn-lg">VOTE NOW</button>
        <p class="small text-warning mt-2">Election has not yet started</p>
      {% endif %}
    </div>
  </div>
{% endblock %}